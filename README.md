# BTM - Biterm Topic Modelling for Short Text with R

This is an R package wrapping the C++ code available at https://github.com/xiaohuiyan/BTM for constructing a **Biterm Topic Model (BTM)**. This model models word-word co-occurrences patterns (e.g., biterms) and is particularly good for finding topics in short texts (as occurs in short survey answers or twitter data).

### Installation

This R package is not on CRAN, you can only install it as follows: `devtools::install_github("jwijffels/BTM")`

### What

Biterm Topic Model (BTM) is a word co-occurrence based topic model that learns topics by modeling word-word co-occurrences patterns (e.g., biterms)
- A biterm consists of two words co-occurring in the same context, for example, in the same short text window. 
- BTM models the biterm occurrences in a corpus (unlike LDA models which model the word occurrences in a document). 
- It's a generative model. In the generation procedure, a biterm is generated by drawing two words independently from a same topic `z`. In other words, the distribution of a biterm `b=(wi,wj)` is defined as: `P(b) = sum_k{P(wi|z)*P(wj|z)*P(z)}`.
- Estimation of the topic model is done with the Gibbs sampling algorithm. Where estimates are provided for `P(w|k)=phi` and `P(z)=theta`.

More detail can be referred to the following paper:

> Xiaohui Yan, Jiafeng Guo, Yanyan Lan, Xueqi Cheng. A Biterm Topic Model For Short Text. WWW2013.
> https://github.com/xiaohuiyan/xiaohuiyan.github.io/blob/master/paper/BTM-WWW13.pdf


### Example

```
library(udpipe)
library(BTM)
data("brussels_reviews_anno", package = "udpipe")

## Taking only nouns of Dutch data
x <- subset(brussels_reviews_anno, language == "nl")
x <- subset(x, xpos %in% c("NN", "NNP", "NNS"))

## Building the model
model  <- BTM(x, k = 4, alpha = 1, beta = 0.01, iter = 1000, trace = 10)

## Inspect the model - topic frequency + conditional term probabilities
model$theta
[1] 0.1897673 0.2346002 0.3411188 0.2345138

topicterms <- terms(model, top_n = 10)
topicterms
[[1]]
                  token probability
appartement appartement 0.055565224
buurt             buurt 0.024285224
Brussel         Brussel 0.012910678
slaapkamer   slaapkamer 0.012171333
badkamer       badkamer 0.011773223
centrum         centrum 0.009612060
foto's           foto's 0.009384569
locatie         locatie 0.008986460
aankomst       aankomst 0.008702096
ontvangst     ontvangst 0.008417732

[[2]]
                  token probability
huis               huis 0.035522281
appartement appartement 0.034648039
Brussel         Brussel 0.026319737
buurt             buurt 0.019141752
stad               stad 0.017945422
centrum         centrum 0.017577320
kamer             kamer 0.015092633
aanrader       aanrader 0.013390162
contact         contact 0.010445348
locatie         locatie 0.009110979

[[3]]
                  token probability
appartement appartement 0.073085849
Brussel         Brussel 0.045010116
centrum         centrum 0.019023446
verblijf       verblijf 0.017694042
buurt             buurt 0.016522901
aanrader       aanrader 0.011236940
kamer             kamer 0.011205288
locatie         locatie 0.011078678
super             super 0.010857111
wijk               wijk 0.008229956

[[4]]
                  token probability
appartement appartement 0.061358004
Brussel         Brussel 0.036916252
centrum         centrum 0.018550415
kamer             kamer 0.018090119
badkamer       badkamer 0.014775983
verblijf       verblijf 0.014775983
bed                 bed 0.011507877
locatie         locatie 0.011277728
keuken           keuken 0.009620660
aanrader       aanrader 0.009114334
```
